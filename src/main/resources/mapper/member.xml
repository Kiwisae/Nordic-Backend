<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nordic.repository.member.MemberMapper">

	<select id="findAll" resultType="MemberDto">
		select * from member
	</select>
	
	<select id="totalPointAsc" resultType="MemberDto">
		select * from member 
		order by total_point asc
	</select>
	
	<select id="totalPointDesc" resultType="MemberDto">
		select * from member 
		order by total_point desc
	</select>
	
	<select id="reqPointAsc" resultType="MemberDto">
		select * from member 
		order by req_point asc
	</select>
	
	<select id="reqPointDesc" resultType="MemberDto">
		select * from member 
		order by req_point desc
	</select>
	
	<select id="usePointAsc" resultType="MemberDto">
		select * from member 
		order by use_point asc
	</select>
	
	<select id="usePointDesc" resultType="MemberDto">
		select * from member 
		order by use_point desc
	</select>
	
	<select id="approvalYList" resultType="MemberDto">
		select * from member where approval_yn = 'Y'
	</select>
	
	<select id="approvalNList" resultType="MemberDto">
		select * from member where approval_yn = 'N'
	</select>
	
	<select id="findAdmins" resultType="MemberDto">
		select * from member where admin_yn = 'Y'
	</select>
	
	<select id="findOne" parameterType="String" resultType="MemberDto">
		select * from member where member_code = #{member_code}
	</select>
	
	<insert id="mbrRegister" parameterType="MemberDto">
		insert into member values(
			#{member_code}, #{member_name}, #{mobile_no}, #{address}, 
			#{age}, #{sex}, 'Y', #{password}, 'N', #{approval_date,jdbcType=DATE}, 'N', 
			#{stop_date,jdbcType=DATE}, 'N', #{admin_date,jdbcType=DATE}, 0, 0, 0, 
			0, 'SYSTEM', sysdate(),
			'SYSTEM', sysdate()
			<!-- #{member_code}, #{member_name}, #{mobile_no}, #{address}, 
			#{age}, #{sex}, #{agree_yn}, #{password}, #{approval_yn}, sysdate(), 'N', 
			DATE_format(#{stop_date,jdbcType=DATE}, '%Y-%m-%d %H:%i:%s'), 'N', 
			DATE_format(#{admin_date,jdbcType=DATE}, '%Y-%m-%d %H:%i:%s'), 0, 0, 0, 
			#{remark}, #{create_member}, sysdate(),
			#{update_member}, sysdate() -->
		)
	</insert>
	
	<update id="admRegister" parameterType="MemberDto">
		update member set
			admin_yn = 'Y',
			admin_date = sysdate(),
			update_member = 'SYSTEM',
			update_date = sysdsate()
		where member_code = #{member_code}
	</update>
	
	<update id="modifyOne" parameterType="MemberModifyDto">
		update member set 
			member_name = #{member_name},
			mobile_no = #{mobile_no},
			address = #{address},
			age = #{age},
			sex = #{sex},
			password = #{password},
			update_member = 'SYSTEM',
			update_date = sysdate()
		where member_code = #{member_code}
	</update>
	
	<update id="delOne" parameterType="MemberDto">
		update member set
			stop_yn = 'Y',
			stop_date = sysdate(),
			update_member = 'SYSTEM',
			update_date = sysdate()
		where member_code = #{member_code}
	</update>


</mapper>